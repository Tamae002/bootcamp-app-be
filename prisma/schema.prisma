generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

<<<<<<< HEAD
model User {
  id        Int       @id @default(autoincrement())
  username  String    @unique
  password  String
  fullname  String?
  sessions  Session[]

  @@map("users")
}

model Session {
  id        Int      @id @default(autoincrement())
  userId    Int
  token     String
  createdAt DateTime @default(now())
  expiresAt DateTime
  isActive  Boolean  @default(true)

  user      User     @relation(fields: [userId], references: [id])

  @@map("session")
}
=======
enum user_role_enum {
  admin
  user
}

enum jawaban_status_enum {
  menunggu
  dinilai
}

model user {
  user_id   String   @id @default(cuid()) @db.VarChar(36)
  name      String   @db.VarChar(255)
  email     String   @unique @db.VarChar(255)
  password  String   @db.VarChar(255)
  role      user_role_enum
  gambar    String?  @db.VarChar(255)
<<<<<<< HEAD
  sessions  Session[]
  anggota   anggota_Kelas[]
  jawaban   Jawaban[]

  resetTokens ResetPasswordToken[]
=======
  sessions  session[]
  anggota   anggota_kelas[]
  jawaban   jawaban[]
>>>>>>> 82ea985483050a3fb08be0b165a476568a696c20
}

model kelas {
  kelas_id String @id @map("Kelas_id") @default(cuid()) @db.VarChar(36)
  nama_kelas String @db.VarChar(255)
  deskripsi String @db.VarChar(255)
  tanggal_mulai DateTime
  tanggal_berakhir DateTime
  pertemuan pertemuan[]
  anggota anggota_kelas[]
}

model pertemuan {
  pertemuan_id String @id @map("Pertemuan_id") @default(cuid()) @db.VarChar(36)
  judul String @db.VarChar(255)
  deskripsi_tugas String @db.VarChar(255)
  kelas_id String @db.VarChar(36)
  tanggal DateTime
  kelas kelas @relation(fields: [kelas_id], references: [kelas_id])
  jawaban jawaban[]

  @@unique([kelas_id, judul])
}

model anggota_kelas {
  anggota_kelas_id String @id @default(cuid()) @db.VarChar(36)
  user_id String @db.VarChar(36)
  kelas_id String @db.VarChar(36)
  user user @relation(fields: [user_id], references: [user_id])
  kelas kelas @relation(fields: [kelas_id], references: [kelas_id])

  @@unique([user_id, kelas_id])
}

model jawaban {
  jawaban_id String @id @map("Jawaban_id") @default(cuid()) @db.VarChar(36)
  pertemuan_id String @db.VarChar(36)
  user_id String @db.VarChar(36)
  file_path String @db.VarChar(255)
  nilai Int @default(0)
  status jawaban_status_enum
  pertemuan pertemuan @relation(fields: [pertemuan_id], references: [pertemuan_id])
  user user @relation(fields: [user_id], references: [user_id])
  
  @@unique([pertemuan_id, user_id])
}

model session {
  session_id String @id @default(cuid()) @db.VarChar(36)
  user_id String @db.VarChar(36)
  token String @db.VarChar(255)
<<<<<<< HEAD
  user User @relation(fields: [user_id], references: [user_id])
}

model ResetPasswordToken {
  id        String   @id @default(uuid())
  userId    String
  token     String   @unique
  expiresAt DateTime
  createdAt DateTime @default(now())

  user      User     @relation(fields: [userId], references: [user_id])

  @@index([userId])
  @@index([token])
}
=======
  user user @relation(fields: [user_id], references: [user_id])
}
>>>>>>> d8bf8e0da43be07c82fd55b6808d24ad75d01896
>>>>>>> 82ea985483050a3fb08be0b165a476568a696c20
